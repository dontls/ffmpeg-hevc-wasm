<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mozilla Firefox</title>
  </head>

  <body>
    <div>
      <button id="play">▶ 播放</button>
      <label
        >倍速
        <select id="rateSel">
          <option value="-16">-16x</option>
          <option value="-8">-8x</option>
          <option value="-4">-4x</option>
          <option value="-2">-2x</option>
          <option value="-1">-1x</option>
          <option value="-0.5">-0.5x</option>
          <option value="0.5">0.5x</option>
          <option value="1" selected>1x</option>
          <option value="2">2x</option>
          <option value="4">4x</option>
          <option value="8">8x</option>
          <option value="16">16x</option>
        </select>
      </label>
    </div>

    <canvas id="canvas"></canvas>
    <script type="module">
      import VideoStream from "./video-stream.js"; // 确保路径正确
      const video = new VideoStream("canvas");
      document.getElementById("play").addEventListener("click", () => {
        video.open(
          "ws://localhost:8787/replay?st=2025-09-09 14:20:00&et=2025-09-09 23:59:59&chl=1"
        );
      });
      document.getElementById("rateSel").addEventListener("change", (r) => {
        const rate = parseFloat(event.target.value);
        video.setRate(rate);
      });
    </script>
  </body>
</html>
